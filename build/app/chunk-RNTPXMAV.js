import{a as _e}from"./chunk-JUBPG7M2.js";import{a as pe,b as ue}from"./chunk-MBHGYJ4R.js";import"./chunk-RITIWUCH.js";import{k as ae,t as se,u as ce,v as le,w as me,x as de,y as ge,z as k}from"./chunk-C76S67M2.js";import{a as oe}from"./chunk-FVU4BDPN.js";import{b as re}from"./chunk-I66BKAGK.js";import"./chunk-ZSSD5RUB.js";import"./chunk-2LP224VR.js";import{c as ie}from"./chunk-DSTAATMF.js";import"./chunk-DQSHFWXE.js";import{$b as a,Ab as G,Bb as c,Cb as P,Db as b,Eb as Z,Fb as H,Ha as L,Ib as o,Jb as i,Kb as d,Lb as A,Lc as K,Mb as q,Mc as ee,Nb as w,Qb as h,Qc as te,Rb as m,Sc as ne,aa as D,ab as r,ac as u,bc as x,ca as B,cc as C,fa as _,fb as Y,g as R,gb as p,hc as W,la as f,ma as v,mc as z,na as V,nb as M,nc as Q,ob as U,rc as J,tb as $,ub as g,uc as F,va as X,wa as N,za as j}from"./chunk-EYQN4OQ3.js";function ye(t,n){t&1&&d(0,"div",2)}var Me=new B("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var be=(()=>{class t{_elementRef=_(j);_ngZone=_(N);_changeDetectorRef=_(J);_renderer=_(Y);_cleanupTransitionEnd;_animationMode=_(L,{optional:!0});constructor(){let e=_(Me,{optional:!0});this._isNoopAnimation=this._animationMode==="NoopAnimations",e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode)}_isNoopAnimation=!1;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=fe(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=fe(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new X;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(s){return new(s||t)};static \u0275cmp=M({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(s,l){s&2&&(G("aria-valuenow",l._isIndeterminate()?null:l.value)("mode",l.mode),Z("mat-"+l.color),b("_mat-animation-noopable",l._isNoopAnimation)("mdc-linear-progress--animation-ready",!l._isNoopAnimation)("mdc-linear-progress--indeterminate",l._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",F],bufferValue:[2,"bufferValue","bufferValue",F],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[$],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(s,l){s&1&&(o(0,"div",0),d(1,"div",1),g(2,ye,1,0,"div",2),i(),o(3,"div",3),d(4,"span",4),i(),o(5,"div",5),d(6,"span",4),i()),s&2&&(r(),P("flex-basis",l._getBufferBarFlexBasis()),r(),H(l.mode==="buffer"?2:-1),r(),P("transform",l._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height, 4px),var(--mdc-linear-progress-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height, 4px);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0})}return t})();function fe(t,n=0,e=100){return Math.max(n,Math.min(e,t))}var he=(()=>{class t{static \u0275fac=function(s){return new(s||t)};static \u0275mod=U({type:t});static \u0275inj=D({imports:[ae]})}return t})();var I=class t{constructor(n){this.data=n}static \u0275fac=function(e){return new(e||t)(p(se))};static \u0275cmp=M({type:t,selectors:[["app-confirm-modal"]],decls:10,vars:4,consts:[["mat-dialog-title",""],[2,"width","100%"],["mat-button","",1,"btn","btn-outline-danger",3,"mat-dialog-close"],["mat-button","","color","warn",1,"btn","btn-outline-success",2,"float","right",3,"mat-dialog-close"]],template:function(e,s){e&1&&(o(0,"h2",0),a(1),i(),o(2,"mat-dialog-content"),a(3),i(),o(4,"mat-dialog-actions")(5,"h6",1)(6,"button",2),a(7,"Cancel"),i(),o(8,"button",3),a(9,"Confirm"),i()()()),e&2&&(r(),u(s.data.title),r(2),u(s.data.message),r(3),c("mat-dialog-close",!1),r(2),c("mat-dialog-close",!0))},dependencies:[k,le,me,ge,de],encapsulation:2})};var Se=()=>[];function ke(t,n){t&1&&(o(0,"span",21),a(1,"First Attemp"),i())}function Ie(t,n){t&1&&(o(0,"span",21),a(1,"Second Attemp"),i())}function Te(t,n){t&1&&(o(0,"span",21),a(1,"Third & Final Attemp"),i())}function Ee(t,n){if(t&1&&(o(0,"div",22),d(1,"mat-progress-bar",23)(2,"br"),o(3,"h5"),a(4,"Submitting the task... please wait"),i(),a(5),i()),t&2){let e=m();r(5),C(" ",e.timeCount,"/",e.pagination.total_items," ")}}function Ae(t,n){t&1&&(o(0,"div",31),a(1,"Loading results..."),i())}function qe(t,n){if(t&1&&(o(0,"div",32),a(1),i()),t&2){let e=m(2);r(),u(e.error)}}function ze(t,n){if(t&1&&(o(0,"div",42),a(1),i()),t&2){let e=m(3);P("color",e.getScoreColor()),r(),C(" ",e.scoredMarks," / ",e.totalMarks," ")}}function Qe(t,n){if(t&1&&(o(0,"div",43),a(1),z(2,"number"),i()),t&2){let e=m(3);P("color",e.getScoreColor()),r(),x(" [ ",Q(2,3,e.getScorePercentage(),"1.0-0"),"% ] ")}}function Fe(t,n){if(t&1&&(o(0,"div",44),a(1),i()),t&2){let e=m(3);r(),C(" ",e.scoredMarks," / ",e.totalMarks," ")}}function Re(t,n){if(t&1&&(o(0,"div",45),a(1),z(2,"number"),i()),t&2){let e=m(3);r(),x(" [ ",Q(2,1,e.getScorePercentage(),"1.0-0"),"% ] ")}}function De(t,n){t&1&&(o(0,"div",46)(1,"b"),a(2,"Congratulation!"),i(),d(3,"br"),a(4," You have qualified for the next round of this competition."),d(5,"br"),a(6," Thank you for taking the test. We will be in touch. "),d(7,"br"),a(8,"For any enquiries kindly contact 0709933100\xA0/\xA00709933790 "),i())}function Be(t,n){if(t&1){let e=w();o(0,"div",47),a(1," Sorry! You didn't achieve 50% and above which is the minmum requirement for participating in Best Driver Challange."),d(2,"br"),a(3," You can retake the assesment to score the required entry marks"),d(4,"br"),o(5,"button",48),h("click",function(){f(e);let l=m(3);return v(l.retakeAssesment())}),d(6,"i",49),a(7," Retake the Assesment"),i()()}}function Ve(t,n){t&1&&(o(0,"div",47),a(1," Sorry! After take the assesment for Three times, You didn't achieve 50% and above which is the minmum requirement for participating in Best Driver Challange."),d(2,"br"),a(3," Thank you for tahing your time"),d(4,"br"),i())}function Xe(t,n){if(t&1&&(o(0,"div",33)(1,"div",34)(2,"div",35),a(3,"Total Score"),i(),g(4,ze,2,4,"div",36)(5,Qe,3,6,"div",37)(6,Fe,2,2,"div",38)(7,Re,3,4,"div",39),d(8,"hr"),g(9,De,9,0,"div",40)(10,Be,8,0,"div",41)(11,Ve,5,0,"div",41),i()()),t&2){let e=m(2);r(4),c("ngIf",e.getScorePercentage()>=50),r(),c("ngIf",e.getScorePercentage()>=50),r(),c("ngIf",e.getScorePercentage()<50),r(),c("ngIf",e.getScorePercentage()<50),r(2),c("ngIf",e.getScorePercentage()>=50),r(),c("ngIf",e.getScorePercentage()<50&&e.numberOfSubmissions<2),r(),c("ngIf",e.getScorePercentage()<50&&e.numberOfSubmissions>=2)}}function Ne(t,n){t&1&&(A(0),d(1,"i",62),q())}function je(t,n){t&1&&(A(0),V(),o(1,"svg",63),d(2,"circle",64)(3,"line",65)(4,"line",66),i(),q())}function Le(t,n){if(t&1&&(o(0,"div",52)(1,"div",53)(2,"span",54),a(3),i(),o(4,"span",55),a(5),i()(),o(6,"div",56),a(7),i(),o(8,"div",57)(9,"div",58)(10,"span",59),a(11,"Your Answer:"),i(),a(12),i(),o(13,"div",60),g(14,Ne,2,0,"ng-container",61)(15,je,5,0,"ng-container",61),i()()()),t&2){let e=n.$implicit,s=n.index;r(3),x("Question ",s+1,""),r(),b("correct",e.verdict),r(),C(" ",e.verdict?"+":"-","/",e.marks," marks "),r(2),u(e.question),r(5),x(" ",e.answer," "),r(),b("correct",e.verdict),r(),c("ngIf",e.verdict),r(),c("ngIf",!e.verdict)}}function Ye(t,n){if(t&1&&(o(0,"div",50),g(1,Le,16,11,"div",51),i()),t&2){let e=m(2);r(),c("ngForOf",e.answers)}}function Ue(t,n){if(t&1&&(o(0,"div",24)(1,"div",25)(2,"h2"),a(3,"Quiz Results"),i()(),o(4,"div",26),g(5,Ae,2,0,"div",27)(6,qe,2,1,"div",28),i(),g(7,Xe,12,7,"div",29)(8,Ye,2,1,"div",30),i()),t&2){let e=m();r(5),c("ngIf",e.loadingResults),r(),c("ngIf",e.error),r(),c("ngIf",!e.loadingResults&&!e.error),r(),c("ngIf",!e.loading&&!e.error)}}function $e(t,n){t&1&&(o(0,"div",31),a(1,"Loading questions..."),i())}function Ge(t,n){if(t&1&&(o(0,"div",32),a(1),i()),t&2){let e=m(2);r(),u(e.error)}}function Ze(t,n){t&1&&d(0,"div",83)}function He(t,n){if(t&1){let e=w();o(0,"div",79),h("click",function(){let l=f(e).$implicit,O=m().$implicit,y=m(3);return v(y.onAnswerSelected(O.quiz_id,l.choice_id))}),o(1,"div",80),g(2,Ze,1,0,"div",81),i(),o(3,"span",82),a(4),i()()}if(t&2){let e=n.$implicit,s=m().$implicit,l=m(3);b("selected",l.isAnswerSelected(s.quiz_id,e.choice_id)),r(2),c("ngIf",l.isAnswerSelected(s.quiz_id,e.choice_id)),r(2),u(e.choice)}}function We(t,n){if(t&1&&(o(0,"div",75)(1,"div",76)(2,"span",54),a(3),i(),a(4),i(),o(5,"p",56),a(6),i(),o(7,"div",77),g(8,He,5,4,"div",78),i()()),t&2){let e=n.$implicit,s=m(3);r(3),x("Question ",e.quiz_id,""),r(),C(" Question ",s.pagination.current_page," of ",s.pagination.total_pages," "),r(2),C("",e.questions," [",e.marks," marks]"),r(2),c("ngForOf",e.choices)}}function Je(t,n){if(t&1&&(o(0,"div",73),g(1,We,9,6,"div",74),i()),t&2){let e=m(2);r(),c("ngForOf",e.questions)}}function Ke(t,n){if(t&1){let e=w();o(0,"button",90),h("click",function(){let l=f(e).index,O=m(3);return v(O.goToPage(l+1))}),a(1),i()}if(t&2){let e=n.index,s=m(3);b("active",s.pagination.current_page===e+1),r(),x(" ",e+1," ")}}function et(t,n){if(t&1){let e=w();o(0,"div",84)(1,"button",85),h("click",function(){f(e);let l=m(2);return v(l.goToPage(l.pagination.current_page-1))}),d(2,"i",86),a(3," Previous "),i(),o(4,"div",87),g(5,Ke,2,3,"button",88),i(),o(6,"button",85),h("click",function(){f(e);let l=m(2);return v(l.goToPage(l.pagination.current_page+1))}),a(7," Next "),d(8,"i",89),i()()}if(t&2){let e=m(2);r(),c("disabled",e.pagination.current_page===1),r(4),c("ngForOf",W(3,Se).constructor(e.pagination==null?null:e.pagination.total_pages)),r(),c("disabled",e.pagination.current_page===e.pagination.total_pages)}}function tt(t,n){if(t&1){let e=w();o(0,"div",67)(1,"div",68)(2,"h3"),a(3,"Please Answer all the questions and "),o(4,"b"),a(5,"submit"),i(),a(6," your work"),i()(),o(7,"div",26),g(8,$e,2,0,"div",27)(9,Ge,2,1,"div",28),i(),g(10,Je,2,1,"div",69)(11,et,9,4,"div",70),d(12,"hr"),o(13,"h6",71)(14,"button",72),h("click",function(){f(e);let l=m();return v(l.onSubmit())}),a(15," Submit Quiz "),i()()()}if(t&2){let e=m();r(8),c("ngIf",e.loading),r(),c("ngIf",e.error),r(),c("ngIf",!e.loading&&!e.error),r(),c("ngIf",!e.loading&&!e.error)}}var xe=class t{constructor(n,e,s,l,O,y,T){this.quizService=n;this.matDialog=e;this.paymentService=s;this.toast=l;this.authService=O;this.categoryService=y;this.router=T;this.currenntUser=this.authService.extractUser(),this.userId=this.currenntUser.user_id,this.categoryService.getApplicantAppliedCategory(this.userId).subscribe(S=>{S.data==null?this.router.navigate(["/driver/dashboard"]):(this.savedCategory=S,this.categoryId=this.savedCategory.data[0].category_id,this.categoryFees=this.savedCategory.data[0].category.cat_fees,this.paymentService.getApplicantTotalPayments(this.userId).subscribe(E=>{this.applicantTotalPayment=E,this.applicantTotalPayment<this.categoryFees&&this.router.navigate(["/driver/payment"])}))}),this.loadResults(),this.checkNoOfSubmissions()}questions=[];pagination;loading=!1;error=null;currenntUser;userId;submitting=!1;numberOfSubmissions=0;timeCount=0;retakeAllowed=!1;answers=[];loadingResults=!1;totalMarks=0;scoredMarks=0;savedCategory;categoryName;categoryId;categoryFees;applicantTotalPayment;ngOnInit(){this.loadQuestions(1)}loadQuestions(n){this.loading=!0,this.error=null,this.quizService.getQuestions(1,1,n).subscribe({next:e=>{this.questions=e.data.data,this.pagination=e.data.pagination,this.loading=!1},error:e=>{this.error="Failed to load questions. Please try again.",this.loading=!1}})}onAnswerSelected(n,e){this.quizService.setAnswer(n,e)}isAnswerSelected(n,e){return this.quizService.getAnswer(n)===e}onSubmit(){let n=this.quizService.getAllAnswers(),e=n.length;e<this.pagination.total_items?this.toast.showError("Uncomplete Assigment","Please complete your assignment before submission. You have done "+e+" of "+this.pagination.total_items+" Questions"):this.matDialog.open(I,{width:"350px",data:{message:"Are you sure you want to submit your work?",title:"Confirm Submission"}}).afterClosed().subscribe(l=>{if(l){this.submitting=!0,this.countToTen();for(let y=0;y<e;y++){let T=n[y],S=T.questionId,E=T.selectedChoiceId,Ce={applicant_id:this.userId,question_id:S,choice_id:E};this.sumbimitAnswerToServer(Ce)}this.createSubmission(),setTimeout(()=>{this.submitting=!1,this.loadResults()},4e3)}})}countToTen(){return R(this,null,function*(){for(let n=1;n<=this.pagination.total_items;n++)yield new Promise(e=>setTimeout(e,500)),this.timeCount=n})}createSubmission(){let n=new Date("2021-03-25"),e=n.getDate()+"-"+n.getMonth()+"-"+n.getFullYear(),s={applicant_id:this.userId,s_count:1,date_submitted:e};this.quizService.craeteSubmission(s).subscribe(l=>{})}sumbimitAnswerToServer(n){this.quizService.subAnswers(n).subscribe(e=>{})}goToPage(n){n>=1&&n<=this.pagination.total_pages&&this.loadQuestions(n)}isLastPage(){return this.pagination?.current_page===this.pagination?.total_pages}loadResults(){this.loadingResults=!0,this.error=null,this.quizService.getResults(this.userId).subscribe({next:n=>{this.answers=n.data,this.calculateTotalMarks(),this.loadingResults=!1},error:n=>{this.error="Failed to load results. Please try again.",this.loadingResults=!1}})}retakeAssesment(){this.quizService.deleteApplicantAnswers(this.userId).subscribe(n=>{this.router.navigate(["/driver/dashboard"])})}checkNoOfSubmissions(){this.quizService.getSubmissions(this.userId).subscribe(n=>{this.numberOfSubmissions=n.data?.length})}calculateTotalMarks(){this.totalMarks=this.answers.reduce((n,e)=>n+e.marks,0),this.scoredMarks=this.answers.reduce((n,e)=>n+(e.verdict?e.marks:0),0)}getScorePercentage(){return this.scoredMarks/this.totalMarks*100}getScoreColor(){let n=this.getScorePercentage();return n>=50?"#4CAF50":n>=30?"#FFA726":"#F44336"}static \u0275fac=function(e){return new(e||t)(p(_e),p(ce),p(ue),p(re),p(oe),p(pe),p(ie))};static \u0275cmp=M({type:t,selectors:[["app-questions"]],decls:29,vars:6,consts:[[1,"content-wrapper"],[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-sm-6"],[1,"breadcrumb","float-sm-right"],[1,"breadcrumb-item"],["routerLink","/customer"],[1,"breadcrumb-item","active"],[1,"content"],[1,"row"],[1,"col-md-12"],[1,"card","card-warning","card-outline"],[1,"card-header"],[1,"card-title",2,"width","100%"],[1,"fa","fa-edit"],["class","badge badge-info","style","float: right;",4,"ngIf"],[1,"card-body"],["class","status-container",4,"ngIf"],["class","results-container",4,"ngIf"],["class","quiz-container",4,"ngIf"],[1,"badge","badge-info",2,"float","right"],[1,"status-container"],["mode","indeterminate"],[1,"results-container"],[1,"results-header"],[1,"loading-error-container"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],["class","score-summary",4,"ngIf"],["class","answers-container",4,"ngIf"],[1,"loading"],[1,"error"],[1,"score-summary"],[1,"score-card"],[1,"score-title"],["class","score-value",3,"color",4,"ngIf"],["class","score-percentage",3,"color",4,"ngIf"],["class","score-value","style","color: red;",4,"ngIf"],["class","score-percentage","style","color: red;",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"score-value"],[1,"score-percentage"],[1,"score-value",2,"color","red"],[1,"score-percentage",2,"color","red"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-warning"],[1,"btn","btn-light",2,"color","red",3,"click"],[1,"nav-icon","fas","fa-edit"],[1,"answers-container"],["class","answer-card",4,"ngFor","ngForOf"],[1,"answer-card"],[1,"answer-header"],[1,"question-number"],[1,"marks-badge"],[1,"question-text"],[1,"answer-section"],[1,"answer-text"],[1,"answer-label"],[1,"verdict-icon"],[4,"ngIf"],["aria-hidden","true",1,"fa","fa-check",2,"color","green","font-size","1.5em"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"icon"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],[1,"quiz-container"],[1,"quiz-header"],["class","questions-container",4,"ngIf"],["class","pagination-controls",4,"ngIf"],[2,"width","100%","text-align","center"],[1,"btn","btn-outline-success",3,"click"],[1,"questions-container"],["class","question-card",4,"ngFor","ngForOf"],[1,"question-card"],[1,"question-header"],[1,"choices-container"],["class","choice-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"choice-item",3,"click"],[1,"choice-radio"],["class","radio-inner",4,"ngIf"],[1,"choice-text"],[1,"radio-inner"],[1,"pagination-controls"],[1,"btn","btn-success",3,"click","disabled"],["aria-hidden","true",1,"fa","fa-chevron-left"],[1,"page-numbers"],["class","page-number",3,"active","click",4,"ngFor","ngForOf"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"page-number",3,"click"]],template:function(e,s){e&1&&(o(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3),d(4,"div",4),o(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),a(9,"Home"),i()(),o(10,"li",8)(11,"a",7),a(12,"Theory Assesment"),i()()()()()()(),o(13,"section",9)(14,"div",2)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13)(19,"h3",14),d(20,"i",15),a(21," Online Theory Assesment "),g(22,ke,2,0,"span",16)(23,Ie,2,0,"span",16)(24,Te,2,0,"span",16),i()(),o(25,"div",17),g(26,Ee,6,2,"div",18)(27,Ue,9,4,"div",19)(28,tt,16,4,"div",20),i()()()()()()()),e&2&&(r(22),c("ngIf",s.numberOfSubmissions==0),r(),c("ngIf",s.numberOfSubmissions==1),r(),c("ngIf",s.numberOfSubmissions==2),r(2),c("ngIf",s.submitting==!0),r(),c("ngIf",s.answers.length>0),r(),c("ngIf",s.submitting==!1&&s.answers.length<1))},dependencies:[ne,K,ee,te,k,he,be],styles:[".quiz-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:0 1rem}.quiz-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.quiz-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2c3e50;margin:0}.quiz-header[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.9rem}.question-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:1.5rem;margin-bottom:1.5rem}.question-card[_ngcontent-%COMP%]   .question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.question-card[_ngcontent-%COMP%]   .question-header[_ngcontent-%COMP%]   .question-number[_ngcontent-%COMP%]{font-weight:700;color:#2c3e50}.question-card[_ngcontent-%COMP%]   .question-header[_ngcontent-%COMP%]   .marks[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.9rem}.question-card[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]{font-size:1.1rem;color:#34495e;margin-bottom:1.5rem}.choices-container[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.8rem;margin-bottom:.8rem;border:1px solid #ddd;border-radius:4px;cursor:pointer;transition:all .2s ease}.choices-container[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:hover{background-color:#f7f9fc}.choices-container[_ngcontent-%COMP%]   .choice-item.selected[_ngcontent-%COMP%]{background-color:#e3f2fd;border-color:#2196f3}.choices-container[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-radio[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #bdc3c7;border-radius:50%;margin-right:12px;position:relative;display:flex;align-items:center;justify-content:center}.choices-container[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-radio[_ngcontent-%COMP%]   .radio-inner[_ngcontent-%COMP%]{width:12px;height:12px;background-color:#2196f3;border-radius:50%}.choices-container[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%]{flex:1}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:2rem;gap:1rem}.pagination-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#2196f3;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s}.pagination-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1976d2}.pagination-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:disabled{background-color:#bdc3c7;cursor:not-allowed}.pagination-controls[_ngcontent-%COMP%]   .page-numbers[_ngcontent-%COMP%]{display:flex;gap:.5rem}.pagination-controls[_ngcontent-%COMP%]   .page-numbers[_ngcontent-%COMP%]   .page-number[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;transition:all .2s}.pagination-controls[_ngcontent-%COMP%]   .page-numbers[_ngcontent-%COMP%]   .page-number[_ngcontent-%COMP%]:hover{background-color:#f7f9fc}.pagination-controls[_ngcontent-%COMP%]   .page-numbers[_ngcontent-%COMP%]   .page-number.active[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff;border-color:#2196f3}.controls-container[_ngcontent-%COMP%]{margin-top:2rem;display:flex;flex-direction:column;align-items:center;gap:1.5rem}.submit-button[_ngcontent-%COMP%]{padding:.75rem 2rem;background-color:#4caf50;color:#fff;border:none;border-radius:4px;font-size:1.1rem;cursor:pointer;transition:background-color .2s}.submit-button[_ngcontent-%COMP%]:hover{background-color:#45a049}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.status-container[_ngcontent-%COMP%]{color:orange;text-align:center}.results-container[_ngcontent-%COMP%]{max-width:900px;margin:2rem auto;padding:0 1rem}.results-header[_ngcontent-%COMP%]{text-align:center}.results-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2c3e50}.loading-error-container[_ngcontent-%COMP%]{text-align:center;margin:2rem 0}.loading-error-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{color:#3498db}.loading-error-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#e74c3c}.score-summary[_ngcontent-%COMP%]{margin-bottom:3rem}.score-summary[_ngcontent-%COMP%]   .score-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:2rem;text-align:center}.score-summary[_ngcontent-%COMP%]   .score-card[_ngcontent-%COMP%]   .score-title[_ngcontent-%COMP%]{font-size:1.2rem;color:#7f8c8d;margin-bottom:1rem}.score-summary[_ngcontent-%COMP%]   .score-card[_ngcontent-%COMP%]   .score-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:.5rem}.score-summary[_ngcontent-%COMP%]   .score-card[_ngcontent-%COMP%]   .score-percentage[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.answer-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:1.5rem;margin-bottom:1.5rem}.answer-card[_ngcontent-%COMP%]   .answer-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.answer-card[_ngcontent-%COMP%]   .answer-header[_ngcontent-%COMP%]   .question-number[_ngcontent-%COMP%]{font-weight:700;color:#2c3e50}.answer-card[_ngcontent-%COMP%]   .answer-header[_ngcontent-%COMP%]   .marks-badge[_ngcontent-%COMP%]{padding:.3rem .8rem;border-radius:12px;font-size:.9rem;background-color:#f44336;color:#fff}.answer-card[_ngcontent-%COMP%]   .answer-header[_ngcontent-%COMP%]   .marks-badge.correct[_ngcontent-%COMP%]{background-color:#4caf50}.answer-card[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]{font-size:1.1rem;color:#34495e;margin-bottom:1.5rem}.answer-card[_ngcontent-%COMP%]   .answer-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.answer-card[_ngcontent-%COMP%]   .answer-section[_ngcontent-%COMP%]   .answer-text[_ngcontent-%COMP%]{flex:1}.answer-card[_ngcontent-%COMP%]   .answer-section[_ngcontent-%COMP%]   .answer-text[_ngcontent-%COMP%]   .answer-label[_ngcontent-%COMP%]{font-weight:700;color:#7f8c8d;margin-right:.5rem}.answer-card[_ngcontent-%COMP%]   .answer-section[_ngcontent-%COMP%]   .verdict-icon[_ngcontent-%COMP%]{margin-left:1rem}.answer-card[_ngcontent-%COMP%]   .answer-section[_ngcontent-%COMP%]   .verdict-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px;stroke:#f44336}.answer-card[_ngcontent-%COMP%]   .answer-section[_ngcontent-%COMP%]   .verdict-icon[_ngcontent-%COMP%]   .icon.correct[_ngcontent-%COMP%]{stroke:#4caf50}"]})};export{xe as QuestionsComponent};
